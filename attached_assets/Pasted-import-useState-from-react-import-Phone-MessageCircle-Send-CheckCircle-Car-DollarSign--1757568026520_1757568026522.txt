import { useState } from "react";
import { Phone, MessageCircle, Send, CheckCircle, Car, DollarSign, Shield, Clock, LogIn, LogOut, User } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import heroImage from "@/assets/hero-driver.jpg";
import AuthModal from "./AuthModal";
import { useAuth } from "@/hooks/useAuth";

interface FormData {
  name: string;
  phone: string;
  city: string;
}

export default function PLSTravelsLanding() {
  const [form, setForm] = useState<FormData>({ name: "", phone: "", city: "" });
  const [showAuthModal, setShowAuthModal] = useState(false);
  const { user, signOut, loading } = useAuth();

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-primary flex items-center justify-center">
        <div className="text-white text-xl">Loading... | роПро▒рпНро▒рпБроХро┐ро▒родрпБ...</div>
      </div>
    );
  }

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setForm({ ...form, [e.target.name]: e.target.value });
  };

  const handleWhatsAppSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const { name, phone, city } = form;

    if (!name || !phone || !city) {
      alert("Please fill all fields");
      return;
    }

    const message = `Hi, I want to join PLS Travels.%0AName: ${name}%0APhone: ${phone}%0ACity: ${city}`;
    window.open(`https://wa.me/919787247132?text=${message}`, "_blank");
  };

  const benefits = [
    { icon: Car, text: "No car needed тАУ we provide fully maintained cabs | роХро╛ро░рпН родрпЗро╡рпИропро┐ро▓рпНро▓рпИ - роиро╛роЩрпНроХро│рпН роорпБро┤рпБроорпИропро╛роХ рокро░ро╛рооро░ро┐роХрпНроХрокрпНрокроЯрпНроЯ роХро╛ро░рпНроХро│рпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒рпЛроорпН" },
    { icon: DollarSign, text: "Fixed salary + big incentives | роиро┐ро░рпНрогропро┐роХрпНроХрокрпНрокроЯрпНроЯ роЪроорпНрокро│роорпН + рокрпЖро░ро┐роп роКроХрпНроХродрпНродрпКроХрпИ" },
    { icon: Clock, text: "Instant daily payouts | роЙроЯройроЯро┐ родро┐ройроЪро░ро┐ рокрпЗроорпЖрогрпНроЯрпН" },
    { icon: Shield, text: "Food & accommodation provided | роЙрогро╡рпБ рооро▒рпНро▒рпБроорпН родроЩрпНроХрпБрооро┐роЯроорпН ро╡ро┤роЩрпНроХрокрпНрокроЯрпБроорпН" },
    { icon: CheckCircle, text: "Accident & expenses covered | ро╡ро┐рокродрпНродрпБ рооро▒рпНро▒рпБроорпН роЪрпЖро▓ро╡рпБроХро│рпН рокро╛родрпБроХро╛роХрпНроХрокрпНрокроЯрпБроорпН" },
    { icon: Clock, text: "24-hour duty options | 24 роорогро┐ роирпЗро░ роЯро┐ропрпВроЯрпНроЯро┐ ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпН" }
  ];

  return (
    <div className="min-h-screen bg-gradient-primary">
      <div className="container mx-auto px-4 py-8">
        <div className="max-w-4xl mx-auto">
          
          {/* Auth Section */}
          <div className="flex justify-end mb-4">
            {user ? (
              <div className="flex items-center gap-4">
                <span className="text-white flex items-center gap-2">
                  <User className="w-4 h-4" />
                  Welcome | ро╡ро░ро╡рпЗро▒рпНроХро┐ро▒рпЛроорпН
                </span>
                <Button
                  onClick={signOut}
                  variant="outline"
                  size="sm"
                  className="bg-white/10 text-white border-white/20 hover:bg-white/20"
                >
                  <LogOut className="w-4 h-4" />
                  Sign Out | ро╡рпЖро│ро┐ропрпЗро▒рпБ
                </Button>
              </div>
            ) : (
              <Button
                onClick={() => setShowAuthModal(true)}
                variant="outline"
                size="sm"
                className="bg-white/10 text-white border-white/20 hover:bg-white/20"
              >
                <LogIn className="w-4 h-4" />
                Driver Login | роЯро┐ро░рпИро╡ро░рпН роЙро│рпНроирпБро┤рпИро╡рпБ
              </Button>
            )}
          </div>

          {/* Hero Section */}
          <Card className="mb-8 overflow-hidden shadow-strong">
            <div className="relative h-64 md:h-80">
              <img 
                src={heroImage} 
                alt="PLS Travels - Professional Uber Driver"
                className="w-full h-full object-cover"
              />
              <div className="absolute inset-0 bg-gradient-to-r from-primary/80 to-transparent flex items-center">
                <div className="text-white p-8">
                  <h1 className="text-3xl md:text-5xl font-bold mb-2">
                    PLS TRAVELS
                  </h1>
                  <p className="text-xl md:text-2xl mb-4">
                    Drive with Uber, Earn More! | роКрокро░ро┐ро▓рпН роУроЯрпНроЯрпБроЩрпНроХро│рпН, роЕродро┐роХроорпН роЪроорпНрокро╛родро┐ропрпБроЩрпНроХро│рпН!
                  </p>
                  <p className="text-sm md:text-base opacity-90">
                    Uber's Authorised Supplier | Fleet & Driver Management<br />
                    роКрокро░ро┐ройрпН роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯ роЪрокрпНро│рпИропро░рпН | ро╡ро╛роХрой роорпЗро▓ро╛рогрпНроорпИ<br />
                    ЁЯУН Chennai & Bangalore | роЪрпЖройрпНройрпИ рооро▒рпНро▒рпБроорпН рокрпЖроЩрпНроХро│рпВро░рпБ
                  </p>
                </div>
              </div>
            </div>
          </Card>

          {/* Benefits Section */}
          <Card className="mb-8 shadow-soft">
            <CardContent className="p-8">
              <h2 className="text-2xl font-bold text-center mb-6 text-primary">
                Why Drive with Us? | роОроЩрпНроХро│рпБроЯройрпН роПройрпН роУроЯрпНроЯ ро╡рпЗрогрпНроЯрпБроорпН?
              </h2>
              <div className="grid md:grid-cols-2 gap-4">
                {benefits.map((benefit, index) => (
                  <div key={index} className="flex items-center gap-3 p-3 rounded-lg bg-muted/50">
                    <benefit.icon className="w-5 h-5 text-success" />
                    <span className="text-foreground">{benefit.text}</span>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Salary Scheme */}
          <Card className="mb-8 shadow-soft border-l-4 border-l-success">
            <CardContent className="p-8">
              <h3 className="text-xl font-bold text-primary mb-4 flex items-center gap-2">
                <DollarSign className="w-6 h-6 text-success" />
                Salary & Incentive Scheme | роЪроорпНрокро│роорпН рооро▒рпНро▒рпБроорпН роКроХрпНроХродрпНродрпКроХрпИ родро┐роЯрпНроЯроорпН
              </h3>
              <div className="bg-muted/30 rounded-lg p-6">
                <div className="space-y-3 text-foreground">
                  <p>тАв First тВ╣4,500 of Uber collection тЖТ <span className="font-semibold text-success">30% (тВ╣1,350) fixed salary</span><br />
                  роорпБродро▓рпН тВ╣4,500 роКрокро░рпН роХро▓рпЖроХрпНро╖ройрпН тЖТ <span className="font-semibold text-success">30% (тВ╣1,350) роиро┐ро░рпНрогропро┐роХрпНроХрокрпНрокроЯрпНроЯ роЪроорпНрокро│роорпН</span></p>
                  <p>тАв Above тВ╣4,500 тЖТ <span className="font-semibold text-success">70% incentive</span> directly to you<br />
                  тВ╣4,500роХрпНроХрпБ роорпЗро▓рпН тЖТ <span className="font-semibold text-success">70% роКроХрпНроХродрпНродрпКроХрпИ</span> роирпЗро░роЯро┐ропро╛роХ роЙроЩрпНроХро│рпБроХрпНроХрпБ</p>
                </div>
                <div className="mt-4 p-4 bg-gradient-accent rounded-lg">
                  <p className="text-white font-semibold text-center">
                    Example: тВ╣7,500/day collection тЖТ тВ╣3,450 earnings!<br />
                    роЙродро╛ро░рогроорпН: тВ╣7,500/роиро╛ро│рпН роХро▓рпЖроХрпНро╖ройрпН тЖТ тВ╣3,450 ро╡ро░рпБрооро╛ройроорпН!
                  </p>
                </div>
              </div>
            </CardContent>
          </Card>

          {/* Application Form */}
          <Card className="mb-8 shadow-strong">
            <CardContent className="p-8">
              <h3 className="text-xl font-bold text-center mb-6 text-primary flex items-center justify-center gap-2">
                <Car className="w-6 h-6" />
                Apply Now | роЗрокрпНрокрпЛродрпЗ ро╡ро┐рогрпНрогрокрпНрокро┐роХрпНроХро╡рпБроорпН
              </h3>
              <form onSubmit={handleWhatsAppSubmit} className="space-y-4 max-w-md mx-auto">
                <input
                  type="text"
                  name="name"
                  placeholder="Your Name | роЙроЩрпНроХро│рпН рокрпЖропро░рпН"
                  value={form.name}
                  onChange={handleChange}
                  className="w-full px-4 py-3 border border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                  required
                />
                <input
                  type="tel"
                  name="phone"
                  placeholder="Phone Number | родрпКро▓рпИрокрпЗроЪро┐ роОрогрпН"
                  value={form.phone}
                  onChange={handleChange}
                  className="w-full px-4 py-3 border border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                  required
                />
                <input
                  type="text"
                  name="city"
                  placeholder="City (Chennai/Bangalore) | роироХро░роорпН (роЪрпЖройрпНройрпИ/рокрпЖроЩрпНроХро│рпВро░рпБ)"
                  value={form.city}
                  onChange={handleChange}
                  className="w-full px-4 py-3 border border-input rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                  required
                />
                <Button
                  type="submit"
                  variant="cta"
                  size="lg"
                  className="w-full"
                >
                  <Send className="w-5 h-5" />
                  Send via WhatsApp | WhatsApp роорпВро▓роорпН роЕройрпБрокрпНрокро╡рпБроорпН
                </Button>
              </form>
            </CardContent>
          </Card>

          {/* Contact Buttons */}
          <div className="flex flex-col sm:flex-row gap-4 justify-center mb-8">
            <Button
              asChild
              variant="default"
              size="lg"
              className="w-full sm:w-auto"
            >
              <a href="tel:+919787247132">
                <Phone className="w-5 h-5" />
                Call Now | роЗрокрпНрокрпЛродрпБ роЕро┤рпИроХрпНроХро╡рпБроорпН
              </a>
            </Button>
            <Button
              asChild
              variant="success"
              size="lg"
              className="w-full sm:w-auto"
            >
              <a
                href="https://wa.me/919787247132"
                target="_blank"
                rel="noopener noreferrer"
              >
                <MessageCircle className="w-5 h-5" />
                WhatsApp Us | WhatsApp роЪрпЖропрпНропро╡рпБроорпН
              </a>
            </Button>
          </div>

          {/* Footer */}
          <div className="text-center">
            <p className="text-muted-foreground text-sm">
              ┬й 2025 PLS TRAVELS | Fleet & Driver Management
            </p>
          </div>
        </div>
      </div>

      {/* Auth Modal */}
      <AuthModal 
        open={showAuthModal} 
        onOpenChange={setShowAuthModal}
        onAuthSuccess={() => setShowAuthModal(false)}
      />
    </div>
  );
}